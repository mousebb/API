box: golang

services:
    - id: mariadb
      env:
        MYSQL_ROOT_PASSWORD: mypassword
        MYSQL_DATABASE: CurtData

    - id: mongo

build:
  steps:
    - setup-go-workspace

    # Gets the dependencies
    - script:
        name: go get
        code: |
            go get -v github.com/golang/lint/golint
            go get -v github.com/mattn/goveralls
            go get -d -t -v ./...

    # Build the project
    - script:
        name: go build
        code: |
            go build -v

    # Test the project
    - script:
        name: go test ./...
        code: |
            go test -v ./models/geography
            go vet ./...
            golint ./...

    # Test coverage for the project
    - script:
        name: gocoveralls
        code: |
            $HOME/gopath/bin/goveralls -service=travis-ci
